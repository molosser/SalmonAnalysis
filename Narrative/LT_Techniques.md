# LT_Techniques.md
>
>明白了，您希望更精细地将 DuckDB清理后的数据 与 AI分析及视频脚本生成 进行明确的规则设定。以下是针对 DuckDB清理后的数据进行AI分析并生成视频文字脚本 的具体流程和规则。


---

🎬 DuckDB数据清理后AI分析与视频脚本生成规则

1️⃣ 数据清理和存储流程

数据来源：
DuckDB数据库存储抓取的三文鱼数据，包括新闻、价格、期货、供应链、政策、运输通道等。

数据清理：

对抓取到的数据进行清理，去除无效、重复或不符合标准的记录。

确保存储的内容符合以下结构：

新闻数据表：news(ts, source, title, url, lang)

日志数据表：ingest_logs(ts, source, status, detail)




---

2️⃣ AI 分析生成规则

目标：
使用 AI 模型对 DuckDB 中清理后的数据进行分析，生成有价值的市场分析报告，并转换为视频脚本格式。

数据输入：

输入来源：仅使用 DuckDB 存储的合法源数据进行分析。

新闻：source, title, url, ts, summary

价格、期货等金融数据：price, volume, date, market_trend

运输通道、供应链等：transportation_data, supplier_info



白名单规则：

仅允许来自 sources.json 配置文件中的合法数据源进行分析。

AI 在生成任何分析之前，必须验证数据的有效性（确保其来自有效来源并符合存储标准）。



---

3️⃣ AI 生成的分析内容结构

AI 会基于以下内容生成具体的分析报告：

1. 市场动态分析：

基于最新的 价格波动数据 和 期货市场数据，分析三文鱼市场的价格走势、供应链瓶颈、需求变化等。

数据支持：从 DuckDB 提取价格、交易量、期货市场的最新数据，生成趋势分析。



2. 供应链与运输通道分析：

分析 运输通道（航司、港口、冷链） 和 供应链（产地、加工厂） 的影响，识别瓶颈和影响因素。

数据支持：使用 DuckDB 中的 运输通道数据 和 供应商信息，对比不同时间段的运输能力与实际需求。



3. 价格波动解析：

基于 市场趋势 和 期货市场对比，分析价格波动的原因。

数据支持：提取 DuckDB 中的历史价格和期货市场数据，生成基于历史波动的分析报告。



4. 法规与政策影响评估：

根据 三文鱼相关法规、监管政策 等内容分析市场和供应链可能面临的变化。

数据支持：从 DuckDB 中提取 政策相关数据，结合 权威统计 和 监管机构数据，评估法规变动对市场的潜在影响。





---

4️⃣ 视频脚本生成规则

AI 输出结构：
AI 生成的分析报告将转换为视频脚本，用于内容创作。视频脚本的结构如下：

1. 引言：

引导观众关注三文鱼市场最新变化。

示例：

> “在今天的视频中，我们将分析三文鱼市场的最新动态，这些数据来自 iLaks、SalmonBusiness 和 FishFarmingExpert 等行业领先网站。”





2. 背景介绍：

简要介绍三文鱼市场和相关数据来源。

示例：

> “我们的数据来源包括三文鱼价格、期货市场、运输通道等，特别是从 FishPool 和 LFEX 提取的价格波动数据。”





3. 市场分析：

基于数据分析，简洁明了地展示市场动态。

示例：

> “根据 SSB 和 FishPool 最新的三文鱼市场数据，我们看到三文鱼的价格在过去一周上涨了12%，而与此同时，运输通道的瓶颈使得供应略有滞后。”





4. 问题引导：

提出当前市场的潜在问题，并引导观众思考。

示例：

> “那么，这些价格波动是否反映了市场需求的变化，还是运输瓶颈导致的供需错配呢？”





5. 深入分析：

使用数据支持分析，回答上述问题。

示例：

> “根据 SAS Cargo 和 Qatar Airways Cargo 的数据，运输通道的瓶颈是由于货运量和航运能力之间的不平衡所致，导致了市场价格上涨。”





6. 结尾：

总结分析结果，鼓励观众关注未来变化。

示例：

> “综上所述，三文鱼市场正在面临供需错配问题，运输瓶颈和市场需求的变化是影响价格波动的主要因素。我们将持续关注运输通道的恢复和价格走势，请继续关注我们的每日更新。”







---

5️⃣ 执行与验证规则

1. 输入验证：

仅允许合法数据源进行分析，数据来源必须来自 DuckDB 中的有效记录。

每次分析前，AI 会检查数据的有效性，确保符合输入规则。



2. 输出验证：

生成的分析报告必须有数据支持，禁止使用未验证的数据或进行预测。

输出内容仅限于 事实摘要 和 逻辑分析，禁止任何带有主观臆测的结论。



3. 定期更新：

每日定时运行 Crawlee 更新数据，并使用 AI 生成新的市场分析报告与视频脚本。





---

6️⃣ 总结

这套规则确保了 DuckDB 清理后的数据 能够通过 AI 进行严谨的分析，并转换为视频脚本输出。所有的分析过程基于真实的、可靠的数据源进行，严格按照白名单规则运作，从而保证输出内容的准确性和可靠性。
>
>
>
>
>
> 面向“夹叙夹议”的视频脚本生产。目标：把权威数据讲“厚”，清晰、有节奏、有记忆点，不喊单。

---

## 0) 总原则（夹叙夹议的骨法）
1. **先锚后叙**：先报本周“锚点”（NSI + SISALMON分规格），再展开供给/通道/需求。
2. **以冲突带节奏**：每个板块设一个“冲突点”（例：现货跌 vs 期货升）。
3. **三明治结构**：事实 → 观点一句话 → 事实旁证（再回扣到中国价格影响）。
4. **每段都落地到中国**：结尾有“【对中国价格的影响】一句话”。

---

## 1) 叙事十法（把1条新闻讲厚5–7分钟）
1) **读标题/信源（Anchor）**  
   - 台词模板：  
     > “锚点先立：**[机构/媒体]** 的 **[周期/期号]**，标题：**《…》**，副标题：**《…》**。”
2) **引用原文（Quote）**  
   - 台词模板：  
     > “原文写得更直白：‘……（≤20字要点）’。”
3) **具体数字（Data）**  
   - 台词模板：  
     > “不是‘上涨’，而是**+X% / X NOK/kg**；不是‘紧张’，而是**OSL日均~650吨**。”
4) **纵向对比（Before）**  
   - 台词模板：  
     > “和**上周/上月/去年同周**对比：**X → Y**，在历史分位上属**[高/中/低]位**。”
5) **横向关联（Elsewhere）**  
   - 台词模板：  
     > “这条线和**[欧洲HORECA/中国节前补货/航油]**是串联的。”
6) **名词解释（Nuance）**  
   - 台词模板：  
     > “‘基差’不是期货-现货这么简单，**必须同口径**：同规格、同交割周、同FOB。”
7) **陈述利害（Stakes）**  
   - 台词模板：  
     > “这不是学术讨论，它会把你**到岸价**直接抬高**X%**。”
8) **正反对照（Conflict）**  
   - 台词模板：  
     > “现货**跌**，但11月合约**升**——疯了？没有，这是**便利收益+舱位紧**在作祟。”
9) **路标/进度条（Signpost）**  
   - 台词模板：  
     > “供给轴‘黄灯’，接下来我们看‘通道轴’。”
10) **花絮/类比（Color）**  
   - 台词模板：  
     > “海虱就像‘差生拉分’，逼得‘优等生’提前毕业——大规格就少了。”

---

## 2) 20分钟单话题脚本节奏（可直接套）
**开场（2’）**  
- “今天两件事：**锚点**（NSI+SISALMON）和**核心冲突**（现货 vs 期货）。”

**供给轴（6–7’）**  
- 读标题/数字 → 去年/上月对比 → 海虱阈值&提前收获 → 小结“黄灯”。  
- 结尾落地中国：**规格价差**对**6–7kg**的影响。

**通道轴（4–5’）**  
- Avinor/航油/舱位 → “650吨/日”标尺 → 小结“绿灯/黄灯”。  
- 落地中国：即使产地价稳，**到岸价**仍可能上行。

**需求轴（4–5’）**  
- EUMOFA/NSC去向 → HORECA vs 零售 → 竞争蛋白。  
- 落地中国：节前补货强度与零售承压的平衡。

**“议”与预警（3–4’）**  
- 解冲突：基差+期限结构+规格价差**三重共振**。  
- 信号灯：**不喊单**，只给“节奏/配比建议”。

---

## 3) 段落模板（拿来即用）
**[段落标题]：海虱压力创年内新高，是不是要大涨？**  
- 叙：  
  > “锚点：**[机构/日期]**标题《…》。关键句：‘…’。本周均值**X**，去年同周**Y**。”  
- 议：  
  > “观点：这**不是**‘马上暴涨’，而是对**大规格**的**中期偏紧**。证据有三：**A 海虱阈值**、**B 提前收获**、**C 规格价差走阔**。”  
- 落地中国：  
  > “策略：**配比上调6–7kg**，但总量**控制节奏**；优先**锁舱**而非追高FOB。”

---

## 4) 金句库（高传播短句）
- “它不是水产品，是**物流+金融产品**。”
- “名义价稳，不代表**到岸价**不涨——**航油+舱位**决定短期结算价。”
- “**基差**要同口径，不然全是**伪信号**。”
- “**看曲线前，先立锚**（NSI+SISALMON）。”

---

## 5) 结尾CTA模板（不喊单）
> “以上是本周‘旬情报’。数据口径见白名单。你在一线看到的价差/到货，请在评论区告诉我，下期我们把**你的信息**也纳入‘锚点’。”
